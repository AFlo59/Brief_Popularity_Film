{% extends "base.html" %}

{% load static %}
{% load static widget_tweaks %}

{% block head_extrascripts %}
    <title>Prédiction</title>
    <style>
        section {
            max-width: 100%;
            min-width: 300px;
            height: 100%;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }
        section > h1 {
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
        }
        section > article {
            margin: 0;
            padding: 0;
            max-width: 100%;
            min-width: 320px;
            max-height: 80vh;
            min-height: 250px;
            border: 0px solid transparent;
            border-top: 1px solid white;
            border-bottom: 1px solid white;
            display: flex;
            flex-direction: column;
            justify-content: safe center;
            align-items: center;
            overflow: auto;
        }
        article > table {
            margin: auto;
            width: 100%;
            height: 100%;
            text-align: center;
        }
        article > table > tbody {
            color: black;
        }
        @media screen and (min-width: 1024px) {
        section > article {
            height: 90%;
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
        }
    }
    </style>
{% endblock head_extrascripts %}

{% block content %}
    {% block messages %}
        {% if messages %}
            <ul>
                {% for message in messages %}
                    <li>{{ message }}</li>
                {% endfor %}
            </ul>
        {% endif %}
    {% endblock messages %}
    <section>
        <h1>Prédiction de la Semaine</h1>
        <article>
            <table>
                <thead>
                    <tr>
                        <th>Classement</th>
                        <th>Sortie</th>
                        <th>Title</th>
                        <th>Spectateur 1ere Semaine</th>
                        <th>Spectateur Hebdomadaire</th>
                        <th>Spectateur Journalier</th>
                    </tr>
                </thead>
                <tbody>
                    {% for film in films %}
                    <tr style="background-color:
                    {% if film.score_pred_divided_divided >= 200 %}
                        rgb(190, 150, 50);
                    {% elif film.score_pred_divided_divided >= 120 %}
                        rgb(200, 30, 200);
                    {% elif film.score_pred_divided_divided >= 80 %}
                        rgb(40, 100, 220);
                    {% elif film.score_pred_divided_divided >= 40 %}
                        rgb(50, 180, 50);
                    {% else %}
                        white;
                    {% endif %}">
                        <td>
                            {% if film.classement %}
                                {{ film.classement }}
                            {% endif %}
                        </td>
                        <td>
                            {% if film.date %}
                                {{ film.date }}
                            {% endif %}
                        </td>
                        <td>
                            {% if film.title %}
                                {{ film.title }}
                            {% endif %}
                        </td>
                        <td>
                            {% if film.score_pred %}
                                {{ film.score_pred }}
                            {% endif %}
                        </td>
                        <td>
                            {% if film.score_pred_divided %}
                                {{ film.score_pred_divided }}
                            {% endif %}
                        </td>
                        <td>
                            {% if film.score_pred_divided_divided %}
                                {{ film.score_pred_divided_divided }}
                            {% endif %}
                        </td>

                    </tr>
                    {% endfor %}
                </tbody>
                <tfoot>
                    <tr>
                        <th style="color: white;" colspan="6">Legende Spectateur Journalier : Vert = 40 à 79, Blueu = 80 à 119, Violet = 120 à 199, Orange = 200 ou +</th>
                    </tr>
                </tfoot>
            </table>
        </article>
    </section>
{% endblock content %}

{% block extra_scripts %}
<script>
</script>
{% endblock extra_scripts %}
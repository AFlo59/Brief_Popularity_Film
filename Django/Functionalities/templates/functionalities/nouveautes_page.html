{% extends "base.html" %}
{% load static %}

{% block head_extrascripts %}
<title>Nouveautés</title>
    <style>
        section {
            min-width: 320px;
            height: 100%;
            width: 100%;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }
        article {
            height: 100%;
            width: 100%;
            margin: 0;
            padding: 0;
        }
        section > article {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
        }
        section > article > a {
        width: 40%;
        height: 15%;
        max-height: 120px;
        margin: 10px;
        text-decoration: none;
        
        }

        section > article > a > figure {
        width: 100%;
        height: 100%;
        margin: 0;
        padding: 0;
        display: flex;
        flex-direction: row;
        justify-content: space-between;
        align-items: center;
        border-radius: 20px;
        background-color: rgb(99, 99, 99);
        box-shadow: 0 4px 8px black;
        transition: transform 0.3s ease;
        }

        section > article > a > figure:hover {
            transform: translateY(-5px); 
        }

        section > article > a > figure > img {
            height: 100%;
            width: 30%;
            object-fit:cover;
            border-radius: 20px;
            margin: 0;
            padding: 0;
        }
        section > article > a > figure > figcaption {
            height: 100%;
            width: 65%;
        }
        section > article > a > figure > figcaption > table {
        width: 100%;
        height: 100%;
        }
        
        

        @media screen and (max-width: 1440px) { 
            section > article {
                flex-flow: column nowrap;
                align-items: center; 
                position: relative;
                padding-top: 0;
                overflow-y: auto;

            }
            section > article > a {
                min-width: 420px;
                min-height: 120px;
                position: relative;
                top: 0;
            }

            section > article > a > figure {
                width: 100%;
                height: 100%;
            }
        }
        @media screen and (max-width: 540px) {
            section {
                display: flex;
                align-items: center;
                margin: 0;
                padding: 0;
            }
            section > article {
               width: 100%;
               height: 100%;
               flex-flow: column nowrap;
               align-items: center; 
               overflow-y: auto;
               position: relative;
               padding-top: 0;

            }
            section > article > a {
                min-width: 280px;
                height: 100px;
                padding: 0;
                margin-left: 0;
                margin-right: 0;
                position: relative;
                top: 0;
            }
            section > article > a > figure {
                width: 100%;
                height: 100%;
                padding: 2px;
            }
            section > article > a > figure > img {
                display: none;
                width: 0;
            }
            section > article > a > figure > figcaption {
                width: 100%;
            }

        }
    </style>
{% endblock head_extrascripts %}

{% block content %}
{% block messages %}
{% if messages %}
<ul>
    {% for message in messages %}
    <li>{{ message }}</li>
    {% endfor %}
</ul>
{% endif %}
{% endblock messages %}

<section>
    <h1>Sorties de la Semaine</h1>
    <article>
        {% for film in films|slice:":10" %}
        <a href="{{ film.url_allo }}">
            <figure>
                <img src="{{ film.thumbnail }}" alt="{{ film.title }}">
                <figcaption>
                    <table>
                        <tr>
                            <td colspan="2">#{{ film.classement}}. {{ film.title }}</td>
                        </tr>
                        <tr>
                            <td>Durée : {{ film.duration }}</td>
                            <td>{% if film.genre %}
                                    Genre : {% for genre in film.genre|slice:":02" %}{{ genre }}{% if not forloop.last and not forloop.first %}{% if forloop.counter == 2 %}, ...{% else %},{% endif %}{% endif %}{% endfor %}
                                {% endif %}
                            </td>
                        </tr>
                        <tr>
                            <td colspan="2">
                                {% if film.director_raw %}
                                    Réalisateur : {{ film.director_raw }} 
                                {% endif %}
                            </td>
                        </tr>
                    </table>
                </figcaption>
            </figure>
        </a>
        {% endfor %}
    </article>
</section>
{% endblock content %}
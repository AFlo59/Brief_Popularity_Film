{% extends "base.html" %}
{% load static %}

{% block head_extrascripts %}
<title>Nouveautés</title>
    <style>
        section {
            max-width: 100%;
            min-width: 300px;
            height: 100%;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }
        section > h1 {
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
        }
        section > article {
            margin: 0;
            padding: 0;
            max-width: 100%;
            min-width: 320px;
            max-height: 80vh;
            min-height: 250px;
            border: 0px solid transparent;
            border-top: 1px solid white;
            border-bottom: 1px solid white;
            display: flex;
            flex-direction: column;
            justify-content: safe center;
            align-items: center;
            overflow-y: scroll;
        }
        section > article> button {
            margin: 0;
            padding: 0;
            max-width: 300px;
            min-width: 300px;
            max-height: 20%;
            min-height: 100px;
            background-color: #555555;
            border: 0px solid transparent;
            border-radius: 10px;
            display: flex;
            justify-content: center;
            overflow: hidden;
            box-shadow: 0 2px 4px white;
            margin-bottom: 10px;
            margin-top: 10px;
        }
        section > article > button > figure {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: row;
            justify-content: space-between;
        }
        section > article > button > figure > img {
            margin: 0;
            padding: 0;
            object-fit: contain;
            width: 40%;
            min-width: 70px;
            max-height: 100%;
            min-height: 100px;
            border-radius: 20%;
        }
        section > article > button > figure > figcaption {
            margin: 0;
            padding: 2px;
            width: 60%;
            min-width: 250px;
            max-height: 100%;
            min-height: 100px;
        }
        section > article > button > figure > figcaption > ul {
            list-style: none;
            color: #ffffff;
            width: 100%;
            height: 100%;
            margin: 0;
            padding: 0;
        }
        section > article > button > figure > figcaption > ul > li {
            margin: 0;
            padding: 0;
            width: 100%;
            min-width: 250px;
            max-height: 33%;
            min-height: 33px;
        }
       
        .popup {
            display: none;
        }
        @media screen and (min-width: 1024px) {
            section > article {
            height: 90%;
            overflow-y: hidden;
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
        }
        section > article > button {
            margin: 10px;
            padding: 0;
            max-width: calc(40% - 20px);
            width: calc(40% - 20px);
            height: calc(20% - 20px);
            height: calc(20% - 20px);
        }
        section > article > button > figure > img {
            margin: 0;
            padding: 0;
            object-fit: cover;
            width: 40%;
            min-width: 100px;
            max-height: 100%;
            min-height: 100px;
            border-radius: 20%;
        }
        }
        
    </style>
{% endblock head_extrascripts %}

{% block content %}
{% block messages %}
{% if messages %}
<ul>
    {% for message in messages %}
    <li>{{ message }}</li>
    {% endfor %}
</ul>
{% endif %}
{% endblock messages %}

<section>
    <h1>Sorties de la Semaine</h1>
    <article>
        {% for film in films|slice:":10" %}
        <button id="btnPopup" class="btnPopup">
            <figure>
                <img src="{{ film.thumbnail }}" alt="{{ film.title }}">
                <figcaption>
                    <ul>
                        <li>#{{ film.classement }}. {{ film.title }}</li>
                        <li>Durée : {{ film.duration }}</li>
                        {% if film.genre %}
                            <li>
                                Genre :
                                {% for genre in film.genre|slice:":02" %}
                                    {{ genre }}
                                {% endfor %}
                            </li>
                        {% endif %}
                    </ul>
                </figcaption>
            </figure>
        </button>
        <div id="overlay" class="overlay">
            <div id="popup" class="popup">
                <span id="btnClose" class="btnClose">&times;</span>
                <figure>
                    <img src="" alt="">
                    <figcaption>
                        <table>
                            <tr>
                                <td colspan="2">{{ film.title }}</td>
                            </tr>
                            <tr>
                                <td>classement : {{ film.classement}}</td>
                                <td>Durée : {{ film.duration }}</td>
                            </tr>
                            <tr>
                                <td colspan="2">
                                    {% if film.genre %}
                                        Genre : {% for genre in film.genre|slice:":5" %}
                                                {{ genre }}
                                            {% if not forloop.last and not forloop.first %}{% if forloop.counter == 2 %}, ...{% else %},{% endif %}{% endif %}{% endfor %}
                                    {% endif %}
                            </td>
                            </tr>
                            <tr>
                                <td colspan="2">
                                    {% if film.director_raw %}
                                        Réalisateur : {{ film.director_raw }} 
                                    {% endif %}
                                </td>
                            </tr>
                            <tr>
                                <td colspan="2">
                                    {% if film.casting %}
                                        Castings : {{ film.casting }} 
                                    {% endif %}
                                </td>
                            </tr>
                            <tr>
                                <td colspan="2"><button><a href="#">Allociné</a></button></td>
                            </tr>
                        </table>
                    </figcaption>
                </figure>
            </div>
        </div>
        {% endfor %}
    </article>
</section>
{% endblock content %}
<script>
</script>